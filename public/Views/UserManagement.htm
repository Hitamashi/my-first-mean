<!-- Content Wrapper. Contains page content -->
<div class="content-wrapper" ng-strict-di>
<!-- Content Header (Page header) -->
<!--
<section class="content-header">
</section>
-->
<!-- Main content -->
<section class="content">
	<div class="row">
        <div class="col-md-12">
            <div class="box box-primary">
            <div class="box-header with-border">
                <h3 class="box-title">List user</h3>
            </div>
            <div class="box-body">
                <button class="btn btn-primary" ng-click="forNew=true; selUser={};">New</button>
                <div class="input-group pull-right col-md-2">
                    <span class="input-group-addon"><i class="fa fa-search"></i></span>
                    <input type="text" ng-model="search" class="form-control pull-right" placeholder="Search">
                </div>
                <div class="table-responsive">
                    <table class="table table-hover">
                        <tr>
                            <th>Name</th>
                            <th>Email</th>
                            <th>Roles</th>
                            <th>Creation Date</th>
                            <th>Last Modified</th>
                            <th>Actions</th>
                        </tr>
                        <tr dir-paginate="d in lstUser | filter:search | itemsPerPage: 5"> 
                            <td>{{d.name}}</td>
                            <td>{{d.email}}</td>
                            <td>
                                <span class="label bg-blue" ng-repeat="role in d.roles">
                                    {{role.name}}
                                </span>
                            </td>
                            <td>{{d.createdDate | date:'short'}}</td>
                            <td>{{d.modifiedDate | date:'short'}}</td>
                            <td> 
                                <div class="tools">
                                    <button class="btn btn-default btn-sm" ng-click="editUserPassword(d._id)" data-toggle="tooltip" data-container="body" title="" data-original-title="Change password">
                                        <i class="fa fa-key"></i>
                                    </button>
                                    <button class="btn btn-default btn-sm" ng-click="selectUser(d)" data-toggle="tooltip" data-container="body" title="" data-original-title="Edit">
                                        <i class="fa fa-edit"></i>
                                    </button>
                                    <button class="btn btn-default btn-sm" ng-click="removeUser(d)" data-toggle="tooltip" data-container="body" title="" data-original-title="Delete">
                                        <i class="fa fa-trash-o"></i>
                                    </button>
                                </div>
                            </td>
                        </tr>
                    </table>
                </div>
                <dir-pagination-controls boundary-links="true" direction-links="true" max-size="4" template-url="/Scripts/Directives/dirPagination.tpl.html"></dir-pagination-controls>
                
                <div ng-show="selUser">
                    <h3 ng-show="!forNew">Edit user</h3>
                    <h3 ng-show="forNew">New user</h3>

                    <form role="form" name="myForm" class="col-md-6">

                        <table class="table table-condensed">
                        <tbody>
                            <tr style="display:none">
                                <th scope="row">Id</th>
                                <td>{{selUser._id}}</td>
                            </tr>
                            <tr>
                                <th scope="row" class="col-md-2">Name</th>
                                <td>
                                    <input ng-model="selUser.name" type="text" class="form-control" />
                                    
                                </td>
                            </tr>
                            <tr>
                                <th scope="row">Email</th>
                                <td>
                                        <input ng-model="selUser.email" type="email" class="form-control" />
                                </td>
                            </tr>
                            <tr ng-show="forNew">
                                <th scope="row">Password</th>
                                <td>
                                        <input ng-model="selUser.password" type="password" class="form-control" />
                                </td>
                            </tr>
                            <tr>
                                <th scope="row">Roles</th>
                                <td>
                                    <div>
                                        <ui-select multiple ng-model="selUser.roles" theme="bootstrap"
                                        ng-disabled="ctrl.disabled" close-on-select="false" title="">
                                            <ui-select-choices repeat="r in lstRoles | propsFilter: {name: $select.search}">
                                                <div ng-bind-html="r.name | highlight: $select.search"></div>
                                            </ui-select-choices>
                                            <ui-select-match placeholder="Choose roles">{{$item.name}}</ui-select-match>
                                        </ui-select>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                        </table>
                        <button class="btn btn-primary pull-right" ng-click="editUser()" ng-show="!forNew">Update</button>
                        <button class="btn btn-primary pull-right" ng-click="newUser()" ng-show="forNew">Create</button>
                        <button class="btn btn-default" ng-click="reset()">Reset</button>
                    </form>
                </div>
            </div>
    </div>

    <!--- End Test--->
    <div >
                
    </div>
</section><!-- /.content -->

<!-- End dialog modal template -->
</div><!-- /.content-wrapper -->
